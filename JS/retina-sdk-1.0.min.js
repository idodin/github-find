var retinaSDK={};retinaSDK.FullClient=function(e,t,n){function r(n,r,o,s){n=t+n,(null==o||"undefined"==typeof o)&&(o={});var i=new XMLHttpRequest,p="undefined"!=typeof s&&"function"==typeof s.success;return i.open(r,n,p),n.indexOf("/image")>=0&&-1==n.indexOf("bulk")?i.setRequestHeader("Accept","image/png"):i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Content-type","application/json"),i.setRequestHeader("api-key",e),i.setRequestHeader("api-client","js_1.0"),p?(i.onreadystatechange=function(){4==i.readyState&&200==i.status?-1==i.responseURL.indexOf("/rest/image")||i.responseURL.indexOf("/rest/image/bulk")>=0?s.success(JSON.parse(i.responseText)):s.success(i.responseText):4==i.readyState&&200!=i.status&&"function"==typeof s.error&&s.error(i.responseText)},void i.send(o)):(i.send(o),-1==i.responseURL.indexOf("/rest/image")||i.responseURL.indexOf("/rest/image/bulk")>=0?JSON.parse(i.responseText):i.responseText)}function o(e,t,o){return t&&"undefined"==typeof t.retina_name&&-1==e.indexOf("retinas")&&(t.retina_name=n),e=i(e,t),r(e,"GET",null,o)}function s(e,t,o){return t&&"undefined"==typeof t.retina_name&&(t.retina_name=n),e=i(e,t),r(e,"POST",JSON.stringify(t.body),o)}function i(e,t){var n=!0;for(var r in t)if("body"!=r&&(n?(e+="?",n=!1):e+="&",t.hasOwnProperty(r))){var o=r,s=t[r];e=e+o+"="+s}return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("undefined"==typeof e[r])throw new Error("Required request parameter '"+r+"' was not set.")}}function f(e){return"undefined"!=typeof e?e[0].positions:void 0}function a(e){return"undefined"!=typeof e?e.positions:void 0}function u(e,t){if("undefined"!=typeof e){var n=e;e=function(e){var r=t(e);n(r)}}return e}function c(e){return{success:e}}function y(e){for(var t=[],n=e.length,r=0;n>r;r++)t.push({text:e[r]});return t}if("undefined"==typeof e)throw new Error("Required apiKey argument was missing.");"undefined"==typeof t&&(t="https://api.cortical.io/rest/"),"undefined"==typeof n&&(n="en_associative");var d={};return d.getRetinas=function(e,t){return"function"==typeof e?(t=c(e),e=void 0):e&&"function"==typeof e.success&&(t=e,e=void 0),"function"==typeof t&&(t=c(t)),o("retinas",e,t)},d.getTerms=function(e,t){return"function"==typeof e?(t=c(e),e=void 0):e&&"function"==typeof e.success?(t=e,e=void 0):"string"==typeof e&&(e={term:e}),"function"==typeof t&&(t=c(t)),o("terms",e,t)},d.getContextsForTerm=function(e,t){return"string"==typeof e&&(e={term:e}),"function"==typeof t&&(t=c(t)),p(e,["term"]),o("terms/contexts",e,t)},d.getSimilarTermsForTerm=function(e,t){return"string"==typeof e&&(e={term:e}),"function"==typeof t&&(t=c(t)),p(e,["term"]),o("terms/similar_terms",e,t)},d.getFingerprintForText=function(e,t){return"string"==typeof e?e={body:e}:"undefined"!=typeof e.text&&(e.body=e.text,delete e.text),"function"==typeof t&&(t=c(t)),t&&"function"==typeof t.success&&(t.success=u(t.success,f)),f(s("text",e,t))},d.getKeywordsForText=function(e,t){return"string"==typeof e?e={body:e}:"undefined"!=typeof e.text&&(e.body=e.text,delete e.text),"function"==typeof t&&(t=c(t)),s("text/keywords",e,t)},d.getTokensForText=function(e,t){return"string"==typeof e?e={body:e}:"undefined"!=typeof e.text&&(e.body=e.text,delete e.text),e.pos_tags&&(e.POStags=e.pos_tags,delete e.pos_tags),"function"==typeof t&&(t=c(t)),p(e,["body"]),s("text/tokenize",e,t)},d.getSlicesForText=function(e,t){return"string"==typeof e?e={body:e}:"undefined"!=typeof e.text&&(e.body=e.text,delete e.text),"function"==typeof t&&(t=c(t)),p(e,["body"]),s("text/slices",e,t)},d.getFingerprintsForTexts=function(e,t){var n=0,r=0;if(Array.isArray(e)){for(n=e.length,r=0;n>r;r++)e[r]={text:e[r]};e={body:e}}else if("undefined"!=typeof e.texts){for(n=e.texts.length,r=0;n>r;r++)e.texts[r]={text:e.texts[r]};e.body=e.texts,delete e.texts}return"function"==typeof t&&(t=c(t)),p(e,["body"]),s("text/bulk",e,t)},d.getLanguageForText=function(e,t){return"string"==typeof e?e={body:e}:"undefined"!=typeof e.text&&(e.body=e.text,delete e.text),"function"==typeof t&&(t=c(t)),p(e,["body"]),s("text/detect_language",e,t)},d.getFingerprintForExpression=function(e,t){return"function"==typeof t&&(t=c(t)),t&&"function"==typeof t.success&&(t.success=u(t.success,a)),"string"==typeof e?e={body:{text:e}}:(p(e,["expression"]),e.body=e.expression,delete e.expression),a(s("expressions",e,t))},d.getContextsForExpression=function(e,t){return"function"==typeof t&&(t=c(t)),"string"==typeof e?e={body:{text:e}}:(p(e,["expression"]),e.body=e.expression,delete e.expression),s("expressions/contexts",e,t)},d.getSimilarTermsForExpression=function(e,t){return"function"==typeof t&&(t=c(t)),"string"==typeof e?e={body:{text:e}}:(p(e,["expression"]),e.body=e.expression,delete e.expression),s("expressions/similar_terms",e,t)},d.getFingerprintsForExpressions=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["expressions"]),e.body=e.expressions,delete e.expressions,s("expressions/bulk",e,t)},d.getContextsForExpressions=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["expressions"]),e.body=e.expressions,delete e.expressions,s("expressions/contexts/bulk",e,t)},d.getSimilarTermsForExpressions=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["expressions"]),e.body=e.expressions,delete e.expressions,s("expressions/similar_terms/bulk",e,t)},d.compare=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["comparison"]),e={body:e.comparison},delete e.comparison,s("compare",e,t)},d.compareBulk=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["comparisons"]),e={body:e.comparisons},delete e.comparisons,s("compare/bulk",e,t)},d.getImage=function(e,t){return"string"==typeof e?e={body:{text:e}}:(p(e,["expression"]),e.body=e.expression,delete e.expression),"function"==typeof t&&(t=c(t)),e.image_scalar=e.image_scalar||"2",e.plot_shape=e.plot_shape||"circle",e.image_encoding=e.image_encoding||"base64/png",e.sparsity=e.sparsity||"1.0",s("image",e,t)},d.getImages=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["expressions"]),e.body=e.expressions,delete e.expressions,e.image_scalar=e.image_scalar||"2",e.plot_shape=e.plot_shape||"circle",e.sparsity=e.sparsity||"1.0",e.get_fingerprint=e.get_fingerprint||"false",s("image/bulk",e,t)},d.compareImage=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["expressions"]),e.body=e.expressions,delete e.expressions,e.image_scalar=e.image_scalar||"2",e.plot_shape=e.plot_shape||"circle",e.image_encoding=e.image_encoding||"base64/png",s("image/compare",e,t)},d.createCategoryFilter=function(e,t){if("function"==typeof t&&(t=c(t)),p(e,["filter_name"]),p(e,["positive_examples"]),!Array.isArray(e.positive_examples))throw new Error("Input to createCategoryFilter was not an array");if(e.body={},e.body.positiveExamples=y(e.positive_examples),delete e.positive_examples,"undefined"!=typeof e.negative_examples){if(!Array.isArray(e.negative_examples))throw new Error("Input to createCategoryFilter was not an array");e.body.negativeExamples=y(e.negative_examples),delete e.negative_examples}return s("classify/create_category_filter",e,t)},d},retinaSDK.LiteClient=function(e,t,n){function r(e){return"undefined"!=typeof e?e.cosineSimilarity:void 0}function o(e){if("undefined"!=typeof e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].term);return t}}function s(e){return"undefined"!=typeof e?e.positions:void 0}function i(e,t){if("undefined"!=typeof e){var n=e;e=function(e){var r=t(e);n(r)}}return e}function p(e){return{success:e}}var f=new retinaSDK.FullClient(e,t,n),a={};return a.getSimilarTerms=function(e,t){if("string"==typeof e)e={text:e};else{if(!(Array.isArray(e)&&e.length>0&&"number"==typeof e[0]))throw new Error("Invalid input for getSimilarTerms call: "+e);e={positions:e}}"function"==typeof t&&(t=p(t)),t&&"function"==typeof t.success&&(t.success=i(t.success,o));var n=f.getSimilarTermsForExpression({expression:e,max_results:20},t);return o(n)},a.getKeywords=function(e,t){return"function"==typeof t&&(t=p(t)),f.getKeywordsForText(e,t)},a.getFingerprint=function(e,t){return"function"==typeof t&&(t=p(t)),f.getFingerprintForText(e,t)},a.compare=function(e,t,n){"function"==typeof n&&(n=p(n)),n&&"function"==typeof n.success&&(n.success=i(n.success,r));var o;if("string"==typeof e&&"string"==typeof t)o=f.compare({comparison:[{text:e},{text:t}]},n);else if(Array.isArray(e)&&Array.isArray(t))o=f.compare({comparison:[{positions:e},{positions:t}]},n);else if("string"==typeof e&&Array.isArray(t))o=f.compare({comparison:[{text:e},{positions:t}]},n);else{if(!Array.isArray(e)||"string"!=typeof t)throw new Error("Unable to compute cosine similarity between '"+e+"' and '"+t+"'");o=f.compare({comparison:[{positions:e},{text:t}]},n)}return r(o)},a.createCategoryFilter=function(e,t){return"function"==typeof t&&(t=p(t)),t&&"function"==typeof t.success&&(t.success=i(t.success,s)),s(f.createCategoryFilter({filter_name:"anonymous",positive_examples:e},t))},a};